nerdydata %>%
gather() %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
spread()
nerdydata %>%
gather() %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider()
?pivot_wider
test <- nerdydata %>%
gather() %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key)
test
nerdydata %>%
gather()
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key)
test
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
)
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column()
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key)
nerdydata
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column()
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key, values_from = value) %>%
select(-rowid)
test
nerdydata %>%
gather()
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column()
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
select(-rowid)
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
select(-rowid) %>%
na.omit()
test
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
select(-rowid); test
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
select(-rowid); test
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value)
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
rowid_to_column()
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
group_indices(key)
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
mutate(group_id = group_indices(., key))
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
mutate(group_id = group_indices(., key)) %>%
#     rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
select(-rowid); test
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
mutate(group_id = group_indices(., key)) %>%
#     rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value)
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
mutate(group_id = group_indices(., key)) %>%
#     rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest()
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
#     rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value)
nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
#     rowid_to_column() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest()
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest() %>%
select(-rowid); test
test <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest(); test
# Make 30% of the data per item NA----
nerdydata_missing <- nerdydata %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(0.3 * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest(); nerdydata_missing
write_csv(nerdydata_missing,
"NerdyDataMissing.csv")
# Declare libraries ----
library("tidyverse")
library("mice")
library("miceadds")
library("labelled")
nerdydata_missing_imp <- mice(nerdydata_missing,
m = 10,
method = 'pmm')
?mice
View(v)
View(nerdydata_missing_imp)
nerdydata_missing_imp %>%
as_tibble()
nerdydata_missing_imp %>%
complete("long", include = TRUE)
nerdydata_missing_imp %>%
complete("long", include = TRUE) %>%
as.tibble()
nerdydata_missing_imp %>%
complete("long", include = TRUE) %>%
as_tibble()
install.packages("naniar")
nerdydata_missing
#####
# Visualize the data ----
ggplot(data = nerdydata_missing$Q1) +
geom_point()
ggplot(data = nerdydata_missing, x = Q1) +
geom_point()
nerdydata_missing
#####
nerdydata_missing %>%
rowid_to_column("respondent")
nerdydata_missing %>%
rowid_to_column("respondent")
#####
nerdydata_missing %>%
rowid_to_column("respondent")
# Visualize the data ----
ggplot(data = nerdydata_missing,
x = Q1,
y = respondent) +
geom_point()
# Visualize the data ----
ggplot(data = nerdydata_missing,
aes(x = Q1,
y = respondent)) +
geom_point()
#####
nerdydata_missing_rowid <-
nerdydata_missing %>%
rowid_to_column("respondent")
# Visualize the data ----
ggplot(data = nerdydata_missing_rowid,
aes(x = Q1,
y = respondent)) +
geom_point()
# Visualize the data ----
ggplot(data = Q1,
aes(x = nerdydata_missing_rowid,
y = respondent)) +
geom_point()
# Visualize the data ----
ggplot(data = nerdydata_missing_rowid,
aes(x = respondent,
y = Q1)) +
geom_point()
ggplot(data = nerdydata_missing_rowid,
aes(x = respondent,
y = Q1)) +
geom_miss_point()
library("naniar")
ggplot(data = nerdydata_missing_rowid,
aes(x = respondent,
y = Q1)) +
geom_miss_point()
View(nerdydata_missing)
gg_miss_var(nerdydata_missing)
gg_miss_upset(nerdydata_missing)
nerdydata
nerdydata %>%
slice(10)
nerdydata %>%
slice(1:10)
nerdydata_missing_few <-
nerdydata %>%
slice(1:10) %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(runif(1, 0, 0.4) * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest(); nerdydata_missing
nerdydata_missing_few <-
nerdydata %>%
slice(1:10) %>%
gather() %>%
group_by(key) %>%
mutate(value =  replace(value,
sample(row_number(),
size = ceiling(runif(1, 0, 0.4) * n()),
replace = FALSE), NA)
) %>%
ungroup() %>%
pivot_wider(names_from = key,
values_from = value) %>%
unnest(); nerdydata_missing_few
miss_var_summary(nerdydata_missing_few)
miss_var_summary(nerdydata_missing_few) %>%
arrange(variable)
miss_var_summary(nerdydata_missing_few)
miss_vars <- miss_var_summary(nerdydata_missing_few)
miss_vars
View(miss_vars)
mcar_test(miss_vars)
mcar_test(nerdydata_missing_few)
# Save missing data ----
write_csv(nerdydata_missing_few,
"NerdyDataMissing.csv")
gg_miss_var(nerdydata_missing_few)
gg_miss_upset(nerdydata_missing_few)
nerdydata_missing_rowid <-
nerdydata_missing_few %>%
rowid_to_column("respondent")
# Visualize the data ----
ggplot(data = nerdydata_missing_rowid,
aes(x = respondent,
y = Q1)) +
geom_point()
ggplot(data = nerdydata_missing_rowid,
aes(x = respondent,
y = Q1)) +
geom_miss_point()
nerdydata_missing_imp <- mice(nerdydata_missing_few,
m = 10,
method = 'pmm')
nerdydata_missing_imp %>%
complete("long", include = TRUE) %>%
as_tibble()
nerdydata_missing_few
nerdydata_missing_imp
?complete
nerdydata_missing_imp %>%
complete("broad", include = TRUE) %>%
as_tibble()
?mice
nerdydata_missing_imp %>%
complete("broad",1) %>%
as_tibble()
nerdydata_missing_imp %>%
complete(1) %>%
as_tibble()
nerdydata_missing_imp %>%
complete(1) %>%
as_tibble()
nerdydata_missing_imp <- mice(nerdydata_missing_few,
m = 10,
method = 'pmm')  %>%
complete(1) %>%
as_tibble()
nerdydata_missing_imp
nerdydata_missing_imp <- mice(nerdydata_missing_few,
m = 15,
method = 'pmm')  %>%
complete(1) %>%
as_tibble()
nerdydata_missing_imp
gg_miss_var(nerdydata_missing_imp)
gg_miss_upset(nerdydata_missing_imp)
dim(nerdydata_missing)
?gg_miss_upset
gg_miss_upset(nerdydata_missing_imp,
nsets = 10)
n_var_miss(nerdydata_missing_imp)
gg_miss_upset(nerdydata_missing_few)
# Visualize the data ----
ggplot(data = nerdydata_missing_rowid,
aes(x = respondent,
y = Q1)) +
geom_point()
blogdown::build_site()
blogdown::serve_site()
nerdydata_missing_imp
nerdydata_missing_few
nerdydata_missing_subset <-
nerdydata %>%
slice(1:10)
# Save subset data ----
write_csv(nerdydata_missing_subset,
"NerdyDataSubset.csv")
# Set the working directory as source ----
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(knitr)
# purl("02-walkthrough.Rmd")
# purl("03-walkthrough.Rmd")
# purl("04-walkthrough.Rmd")
purl("05-walkthrough.Rmd")
setwd("~/Documents/WVU/Teaching/GitHub.nosync/Workspace/edp611")
View(miss_vars)
# Set the working directory as source ----
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(knitr)
# purl("02-walkthrough.Rmd")
# purl("03-walkthrough.Rmd")
# purl("04-walkthrough.Rmd")
purl("05-walkthrough.Rmd")
