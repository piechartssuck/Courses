label.size = NA,
hjust = 1) +
annotate(geom="label", x = 1900, y = 9,
size = 3.5,
fontface = 2,
color = "#000000",
fill="#FFFFFF",
label = "Strikeouts per game per team",
label.size = NA,
hjust = 0.7) +
scale_x_continuous("",
breaks=c(1900,1910,1920,1930,1940,1950,1960,1970,1980,1990,2000,2010),
limits=c(1900,2015)) +
scale_y_continuous("",
breaks=c(0,1,2,3,4,5,6,7,8,9),
limits=c(0,9),
position = "right"
) +
theme_minimal() +
theme(plot.title = element_text(family = "playfair",
face = "bold",
size = 16,
color = "#000000",
margin = margin(b = 0),
vjust = 0),
plot.subtitle = element_text(family = "playfair",
size = 12,
color = "#000000",
margin = margin(b = 10),
vjust = -2)) +
theme(axis.text.y.right = element_text(color = "#7e7e7e",
face = "bold"),
axis.text.x = element_text(hjust = 0),
axis.line.x = element_line(),
axis.ticks.x = element_line(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_line(linetype = "dotted",
color = "#dfdfdf"),
panel.grid.minor = element_blank()) +
theme(legend.position = c(0, 0.9),
legend.background = element_rect(fill="#FFFFFF",
color=NA),
legend.justification='left',
legend.direction='horizontal',
legend.text = element_text(color = "#7e7e7e"),
legend.title = element_blank()) +
labs(title = "Strikeouts on the Rise",
subtitle = "There were more strikeouts in 2012 than at any other time in major league history."
)
ggplot(team_strikeouts,
aes(yearID, strikeouts_per_game)) +
geom_point (color="#dfdfdf") +
geom_segment(aes(x = 1917, y = 1.3, xend = 1917, yend = 3.5),
color = "#dfdfdf",
size = 0.1) +
geom_segment(aes(x = 1945, y = 1.8, xend = 1945, yend = 3.9),
color = "#dfdfdf",
size = 0.1) +
geom_segment(aes(x = 1963, y = 2.8, xend = 1963, yend = 5.8),
color = "#dfdfdf",
size = 0.1) +
geom_segment(aes(x = 1969, y = 7.9, xend = 1969, yend = 5.8),
color = "#dfdfdf",
size = 0.1) +
geom_segment(aes(x = 1972, y = 1.8, xend = 1972, yend = 5.2),
color = "#dfdfdf",
size = 0.1) +
geom_segment(aes(x = 2006, y = 3.8, xend = 2006, yend = 6.8),
color = "#dfdfdf",
size = 0.1) +
stat_summary(fun = 'mean',
geom =c("point"),
color = "#00688b") +
stat_summary(aes(shape="League average"),
fun = 'mean',
geom =c("line"),
color = "#00688b",
show.legend = TRUE) +
annotate("text", x = 2010, y = 8.7,
label = "2012\nLeague average",
fontface = 2,
size = 4) +
annotate("text", x = 2010, y = 8,
label = "7.5",
fontface = 2,
color = "#00688b",
size = 6) +
annotate("text", x = 1924, y = 1.5,
label = "League average\n1924",
fontface = 2,
size = 4) +
annotate("text", x = 1924, y = 2.2,
label = "2.7",
fontface = 2,
color = "#00688b",
size = 6) +
annotate(geom ="text", x = 1917, y = 1,
size = 3.0,
color = "#7e7e7e",
label = "U.S. enters\nWorld War I.",
hjust = 0.5) +
annotate(geom ="text", x = 1945, y = 1.5,
size = 3.0,
color = "#7e7e7e",
label = "Players return\nfrom World War II.",
hjust = 0.5) +
annotate(geom ="text", x = 1963, y = 2.5,
size = 3.0,
color = "#7e7e7e",
label = "Strike zone enlarged\nfrom 1963-68.",
hjust = 0.5) +
annotate(geom ="text", x = 1969, y = 8.5,
size = 3.0,
color = "#7e7e7e",
label = "Pitching had become so dominant\nin the 1960s that the mound\nwas lowered in 1969.",
hjust = 0.5) +
annotate(geom ="text", x = 1972, y = 1.5,
size = 3.0,
color = "#7e7e7e",
label = "Designated hitter\nrule took effect.",
hjust = 0.5) +
annotate(geom ="text", x = 2006, y = 3.5,
size = 3.0,
color = "#7e7e7e",
label = "Mitchell report\non steroids.",
hjust = 0.5) +
annotate(geom="label", x = 1925, y = 9,
size = 3.0,
fontface = 2,
color = "#7e7e7e",
fill="#FFFFFF",
label = "(by batters)",
label.size = NA,
hjust = 1) +
annotate(geom="label", x = 1900, y = 9,
size = 3.5,
fontface = 2,
color = "#000000",
fill="#FFFFFF",
label = "Strikeouts per game per team",
label.size = NA,
hjust = 0.3) +
scale_x_continuous("",
breaks=c(1900,1910,1920,1930,1940,1950,1960,1970,1980,1990,2000,2010),
limits=c(1900,2015)) +
scale_y_continuous("",
breaks=c(0,1,2,3,4,5,6,7,8,9),
limits=c(0,9),
position = "right"
) +
theme_minimal() +
theme(plot.title = element_text(family = "playfair",
face = "bold",
size = 16,
color = "#000000",
margin = margin(b = 0),
vjust = 0),
plot.subtitle = element_text(family = "playfair",
size = 12,
color = "#000000",
margin = margin(b = 10),
vjust = -2)) +
theme(axis.text.y.right = element_text(color = "#7e7e7e",
face = "bold"),
axis.text.x = element_text(hjust = 0),
axis.line.x = element_line(),
axis.ticks.x = element_line(),
panel.grid.major.x = element_blank(),
panel.grid.major.y = element_line(linetype = "dotted",
color = "#dfdfdf"),
panel.grid.minor = element_blank()) +
theme(legend.position = c(0, 0.9),
legend.background = element_rect(fill="#FFFFFF",
color=NA),
legend.justification='left',
legend.direction='horizontal',
legend.text = element_text(color = "#7e7e7e"),
legend.title = element_blank()) +
labs(title = "Strikeouts on the Rise",
subtitle = "There were more strikeouts in 2012 than at any other time in major league history."
)
# Pipes everwhere!
team_strikeouts <- select(Teams, yearID, name, G, SO) %>%
mutate(strikeouts_per_game = SO/G)
avg_so_by_year  <- team_strikeouts %>%
group_by(yearID) %>%
summarise(avg_so = mean(strikeouts_per_game))
blogdown::build_site()
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
?annotate
install.packages(c("magick", "paws.analytics", "paws.compute", "paws.machine.learning", "paws.management", "paws.networking", "paws.storage", "RcppArmadillo", "rvest", "sparklyr", "terra", "zoo"))
install.packages(c("magick", "RcppArmadillo", "terra", "textshaping", "zoo"))
install.packages(c("magick", "RcppArmadillo", "terra", "textshaping", "zoo"))
install.packages(c("flextable", "magick", "RcppArmadillo", "terra", "textshaping", "zoo"))
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(knitr)
purl("06-assignment-sols.Rmd")
setwd("~/Documents/WVU/Teaching/GitHub.nosync/Workspace/edp693e")
setwd(dirname(rstudioapi::getActiveDocumentContext()$path))
library(knitr)
purl("05-assignment-sols.Rmd")
install.packages(c("magick", "RcppArmadillo", "terra", "textshaping", "zoo"))
install.packages(c("magick", "RcppArmadillo", "terra", "textshaping", "zoo"))
install.packages("gutenbergr")
blogdown::build_site()
setwd("~/Documents/WVU/Teaching/GitHub.nosync/Workspace/edp693e")
blogdown::build_site()
blogdown::serve_site()
?gutenberg_download
install.packages("flextable")
blogdown::build_site()
blogdown::serve_site()
# Chunk 1
library(knitr)
library(kableExtra)
library(tidyverse)
library(downloadthis)
library(here)
# Chunk 2: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 3
library(tidyverse)
library(gutenbergr)
library(tidytext)
library(flextable)
gutenberg_metadata
# Chunk 4
sherlock <- gutenberg_works() %>%
filter(title == "The Adventures of Sherlock Holmes")
sherlock
# Chunk 5
sherlock_flex <- flextable(sherlock) %>%
autofit() %>%
theme_booktabs()
sherlock_flex
# Chunk 6
sherlock_get <- gutenberg_works() %>%
filter(title == "The Adventures of Sherlock Holmes")
sherlock_get
# Chunk 7
sherlock_text <- gutenberg_download(1661)
sherlock_flex_text <- sherlock_text %>%
head(n = 15) %>%
flextable() %>%
autofit() %>%
theme_booktabs()
sherlock_flex_text
# Chunk 8
sherlock_text_tc <- gutenberg_download(1661,
meta_fields = "title")
sherlock_flex_text_tc <- sherlock_text_tc %>%
head(n = 15) %>%
flextable() %>%
autofit() %>%
theme_booktabs()
sherlock_flex_text_tc
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE)))) %>%
ungroup() %>%
filter(chapter > 0) %>%
unite(document, title, chapter)
sherlock_chapters
sherlock_chapters <- sherlock_flex_text %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE)))) %>%
ungroup() %>%
filter(chapter > 0)
sherlock_chapters
sherlock_chapters <- sherlock_flex_text %>%
group_by(title)
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title)
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE))))
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE)))) %>%
ungroup() %>%
filter(chapter > 0)
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE)))) %>%
ungroup()
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE)))) %>%
ungroup()
sherlock_chapters
unique(sherlock_chapters$chapter)
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE)))) %>%
ungroup() %>%
filter(chapter > 0) %>%
unite(document, title, chapter)
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(text, regex("^chapter ", ignore_case = TRUE))))
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title)
sherlock_chapters
sherlock_chapters <- sherlock_text_tc %>%
group_by(title)
sherlock_chapters
library(tidyverse)
library(gutenbergr)
library(tidytext)
gutenberg_metadata
pride_text_tc <- gutenberg_download(1342,
meta_fields = "title")
pride_text_tc %>%
head(n=20)
pride_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
)))
pride_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup()
pride_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0)
pride_text_tc %>%
group_by(title)
pride_text_tc %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0)
titles <- c("Twenty Thousand Leagues under the Sea",
"The War of the Worlds",
"Pride and Prejudice",
"Great Expectations")
books <- gutenberg_works(title %in% titles) %>%
gutenberg_download(meta_fields = "title")
by_chapter <- books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0) %>%
unite(document, title, chapter)
by_chapter
books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
)))
books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup()
by_chapter <- books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0) %>%
unite(document, title, chapter)
by_chapter
books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0)
books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0) %>%
unite(document, title, chapter)
by_chapter <- books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0) %>%
unite(document, title, chapter)
by_chapter <- books %>%
group_by(title) %>%
mutate(chapter = cumsum(str_detect(
text, regex("^chapter ", ignore_case = TRUE)
))) %>%
ungroup() %>%
filter(chapter > 0)
unique(by_chapter$chapter)
unique(by_chapter$title)
pride_get <- gutenberg_works() %>%
filter(title == "The War of the Worlds")
pride_get
blogdown::serve_site()
blogdown::build_site('')
blogdown::build_site()
blogdown::build_site('')
blogdown::serve_site()
blogdown::build_site()
blogdown::serve_site()
View(clintonFiftyBlue)
setwd("~/Documents/WVU/Teaching/Past/EDP 693/EDP 493A:693C Fall 2018/Weeks/Weekly Activities/Week 8/In Class")
## ----eval = TRUE, echo=FALSE, message=FALSE------------------------------
# get a list of the files in the input directory
files <- list.files("state-of-the-union-corpus-1989-2017")
files
## ----echo=FALSE----------------------------------------------------------
# stick together the path to the file & 1st file name
fileName <- glue("state-of-the-union-corpus-1989-2017/", files[1], sep = "")
library(tidyverse)
library(tidytext)
library(glue)
## ------------------------------------------------------------------------
# Replace the term fileName with your variable name if you chose to point and click
fileName <- trimws(fileName)
## ----echo=FALSE----------------------------------------------------------
# stick together the path to the file & 1st file name
fileName <- glue("state-of-the-union-corpus-1989-2017/", files[1], sep = "")
fileName
## ------------------------------------------------------------------------
# Replace the term fileName with your variable name if you chose to point and click
fileName <- trimws(fileName)
fileName
## ------------------------------------------------------------------------
# read in the new file
fileText <- glue(read_file(fileName))
## ----echo=FALSE----------------------------------------------------------
# remove any dollar signs (they're special characters in R)
fileText <- gsub("\\$", "", fileText)
## ------------------------------------------------------------------------
# tokenize
tokens <- data_frame(text = fileText) %>%
unnest_tokens(word, text)
fileText
series %>% count(word, sort = TRUE)
library(wordcloud)
library(devtools)
library(tidyverse)
library(stringr)
library(tidytext)
library(dplyr)
library(reshape2)
library(igraph)
library(ggraph)
library(harrypotter)
series <- rbind(series, clean)
titles <- c("Philosopher's Stone",
"Chamber of Secrets",
"Prisoner of Azkaban",
"Goblet of Fire",
"Order of the Phoenix",
"Half-Blood Prince",
"Deathly Hallows")
books <- list(philosophers_stone,
chamber_of_secrets,
prisoner_of_azkaban,
goblet_of_fire,
order_of_the_phoenix,
half_blood_prince,
deathly_hallows)
series <- tibble()
for(i in seq_along(titles)) {
clean <- tibble(chapter = seq_along(books[[i]]),
text = books[[i]]) %>%
unnest_tokens(word, text) %>%
mutate(book = titles[i]) %>%
select(book, everything())
series <- rbind(series, clean)
}
# set factor to keep books in order of publication
series$book <- factor(series$book, levels = rev(titles))
series
series %>% count(word, sort = TRUE)
series$book <- factor(series$book, levels = rev(titles))
series %>%
anti_join(stop_words) %>%
count(word) %>%
with(wordcloud(word, n, max.words = 100))
get_sentiments("afinn")
get_sentiments("afinn")
get_sentiments("bing")
get_sentiments("nrc")
setwd("~/Documents/WVU/Teaching/GitHub.nosync/Workspace/edp693e")
blogdown::build_site()
blogdown::serve_site()
